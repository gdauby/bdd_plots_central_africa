<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>#' Add a type in subplot table #' #' Add feature and associated descriptors in subplot list table #' #' @return nothing #' #' @author Gilles Dauby, gilles.dauby@ird.fr #' @param new_type string value with new type descritors - try to avoid space #' @param new_valuetype string one of following 'numeric', 'integer', 'categorical', 'ordinal', 'logical', 'character' #' @param new_maxallowedvalue numeric if valuetype is numeric, indicate the maximum allowed value #' @param new_minallowedvalue numeric if valuetype is numeric, indicate the minimum allowed value #' @param new_typedescription string full description of trait #' @param new_factorlevels string a vector of all possible value if valuetype is categorical or ordinal #' @param new_expectedunit string expected unit (unitless if none) #' @param new_comments string any comments #' #' @export add_subplottype &lt;- function(new_type = NULL, new_valuetype = NULL, new_maxallowedvalue = NULL, new_minallowedvalue = NULL, new_typedescription = NULL, new_factorlevels = NULL, new_expectedunit = NULL, new_comments = NULL) if(is.null(new_type)) stop("define new type") if(try_open_postgres_table(table = "subplotype_list", con = mydb)  dplyr::distinct(type)  dplyr::filter(type == !!new_type)  dplyr::collect()  nrow()&gt;0) stop("new type already in table") if (is.null(new_valuetype)) stop("define new_valuetype") if (!any(new_valuetype==c('numeric', 'integer', 'categorical', 'ordinal', 'logical', 'character', 'table_colnam'))) stop("valuetype should one of following 'numeric', 'integer', 'categorical', 'ordinal', 'logical', 'character' or 'table_colnam'") if (new_valuetype=="numeric" | new_valuetype=="integer") if (!is.numeric(new_maxallowedvalue) &amp; !is.integer(new_maxallowedvalue)) stop("valuetype numeric of integer and max value not of this type") if (new_valuetype=="numeric" | new_valuetype=="integer") if (!is.numeric(new_minallowedvalue) &amp; !is.integer(new_minallowedvalue)) stop("valuetype numeric of integer and min value not of this type") mydb &lt;- call.mydb() new_data_renamed &lt;- tibble(type = new_type, valuetype = new_valuetype, maxallowedvalue = ifelse(is.null(new_maxallowedvalue), NA, new_maxallowedvalue), minallowedvalue = ifelse(is.null(new_minallowedvalue), NA, new_minallowedvalue), typedescription = ifelse(is.null(new_typedescription), NA, new_typedescription), factorlevels = ifelse(is.null(new_factorlevels), NA, new_factorlevels), expectedunit = ifelse(is.null(new_expectedunit), NA, new_expectedunit), comments = ifelse(is.null(new_comments), NA, new_comments)) print(new_data_renamed) Q &lt;- choose_prompt(message = "confirm adding this type?") if(Q) DBI::dbWriteTable(mydb, "subplotype_list", new_data_renamed, append = TRUE, row.names = FALSE) — add_subplot_observations_feat • plotsdatabase</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="#' Add a type in subplot table #' #' Add feature and associated descriptors in subplot list table #' #' @return nothing #' #' @author Gilles Dauby, gilles.dauby@ird.fr #' @param new_type string value with new type descritors - try to avoid space #' @param new_valuetype string one of following 'numeric', 'integer', 'categorical', 'ordinal', 'logical', 'character' #' @param new_maxallowedvalue numeric if valuetype is numeric, indicate the maximum allowed value #' @param new_minallowedvalue numeric if valuetype is numeric, indicate the minimum allowed value #' @param new_typedescription string full description of trait #' @param new_factorlevels string a vector of all possible value if valuetype is categorical or ordinal #' @param new_expectedunit string expected unit (unitless if none) #' @param new_comments string any comments #' #' @export add_subplottype &lt;- function(new_type = NULL, new_valuetype = NULL, new_maxallowedvalue = NULL, new_minallowedvalue = NULL, new_typedescription = NULL, new_factorlevels = NULL, new_expectedunit = NULL, new_comments = NULL) if(is.null(new_type)) stop(" define new type if con="mydb)" dplyr::distinct dplyr::filter dplyr::collect nrow stop already in table new_valuetype should one of following or numeric integer and max value not this min mydb call.mydb new_data_renamed tibble new_type valuetype="new_valuetype," maxallowedvalue="ifelse(is.null(new_maxallowedvalue)," na new_maxallowedvalue minallowedvalue="ifelse(is.null(new_minallowedvalue)," new_minallowedvalue typedescription="ifelse(is.null(new_typedescription)," new_typedescription factorlevels="ifelse(is.null(new_factorlevels)," new_factorlevels expectedunit="ifelse(is.null(new_expectedunit)," new_expectedunit comments="ifelse(is.null(new_comments)," new_comments print q choose_prompt adding dbi::dbwritetable append="TRUE," row.names="FALSE)" add_subplot_observations_feat><meta name="description" content="A short description..."><meta property="og:description" content="A short description..."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">plotsdatabase</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>#' Add a type in subplot table #' #' Add feature and associated descriptors in subplot list table #' #' @return nothing #' #' @author Gilles Dauby, <a href="mailto:gilles.dauby@ird.fr">gilles.dauby@ird.fr</a> #' @param new_type string value with new type descritors - try to avoid space #' @param new_valuetype string one of following 'numeric', 'integer', 'categorical', 'ordinal', 'logical', 'character' #' @param new_maxallowedvalue numeric if valuetype is numeric, indicate the maximum allowed value #' @param new_minallowedvalue numeric if valuetype is numeric, indicate the minimum allowed value #' @param new_typedescription string full description of trait #' @param new_factorlevels string a vector of all possible value if valuetype is categorical or ordinal #' @param new_expectedunit string expected unit (unitless if none) #' @param new_comments string any comments #' #' @export add_subplottype &lt;- function(new_type = NULL, new_valuetype = NULL, new_maxallowedvalue = NULL, new_minallowedvalue = NULL, new_typedescription = NULL, new_factorlevels = NULL, new_expectedunit = NULL, new_comments = NULL) if(is.null(new_type)) stop("define new type") if(try_open_postgres_table(table = "subplotype_list", con = mydb) <!-- %&gt;% --> dplyr::distinct(type) <!-- %&gt;% --> dplyr::filter(type == !!new_type) <!-- %&gt;% --> dplyr::collect() <!-- %&gt;% --> nrow()&gt;0) stop("new type already in table") if (is.null(new_valuetype)) stop("define new_valuetype") if (!any(new_valuetype==c('numeric', 'integer', 'categorical', 'ordinal', 'logical', 'character', 'table_colnam'))) stop("valuetype should one of following 'numeric', 'integer', 'categorical', 'ordinal', 'logical', 'character' or 'table_colnam'") if (new_valuetype=="numeric" | new_valuetype=="integer") if (!is.numeric(new_maxallowedvalue) &amp; !is.integer(new_maxallowedvalue)) stop("valuetype numeric of integer and max value not of this type") if (new_valuetype=="numeric" | new_valuetype=="integer") if (!is.numeric(new_minallowedvalue) &amp; !is.integer(new_minallowedvalue)) stop("valuetype numeric of integer and min value not of this type") mydb &lt;- call.mydb() new_data_renamed &lt;- tibble(type = new_type, valuetype = new_valuetype, maxallowedvalue = ifelse(is.null(new_maxallowedvalue), NA, new_maxallowedvalue), minallowedvalue = ifelse(is.null(new_minallowedvalue), NA, new_minallowedvalue), typedescription = ifelse(is.null(new_typedescription), NA, new_typedescription), factorlevels = ifelse(is.null(new_factorlevels), NA, new_factorlevels), expectedunit = ifelse(is.null(new_expectedunit), NA, new_expectedunit), comments = ifelse(is.null(new_comments), NA, new_comments)) print(new_data_renamed) Q &lt;- choose_prompt(message = "confirm adding this type?") if(Q) DBI::dbWriteTable(mydb, "subplotype_list", new_data_renamed, append = TRUE, row.names = FALSE)</h1>

      <div class="d-none name"><code>add_subplot_observations_feat.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A short description...</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_subplot_observations_feat</span><span class="op">(</span></span>
<span>  <span class="va">new_data</span>,</span>
<span>  id_sub_plots <span class="op">=</span> <span class="st">"id_sub_plots"</span>,</span>
<span>  <span class="va">features</span>,</span>
<span>  allow_multiple_value <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  add_data <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-new-data">new_data<a class="anchor" aria-label="anchor" href="#arg-new-data"></a></dt>
<dd><p>A data frame containing the new observations to add.</p></dd>


<dt id="arg-id-sub-plots">id_sub_plots<a class="anchor" aria-label="anchor" href="#arg-id-sub-plots"></a></dt>
<dd><p>A single string specifying the column name for subplot IDs. Optional.</p></dd>


<dt id="arg-features">features<a class="anchor" aria-label="anchor" href="#arg-features"></a></dt>
<dd><p>A character vector of feature names to process.</p></dd>


<dt id="arg-allow-multiple-value">allow_multiple_value<a class="anchor" aria-label="anchor" href="#arg-allow-multiple-value"></a></dt>
<dd><p>A single logical value indicating whether multiple values are allowed. Optional.</p></dd>


<dt id="arg-add-data">add_data<a class="anchor" aria-label="anchor" href="#arg-add-data"></a></dt>
<dd><p>A single logical value indicating whether to actually add data to the database. Optional.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing `list_features_add`, which is a list of data frames
for each processed feature. The function may error if features are not
found in the data, if no valid values exist, or if subplot IDs are not
found in the database.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Add subplot observations features</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gilles Dauby.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

