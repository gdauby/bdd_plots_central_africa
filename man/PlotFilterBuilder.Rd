% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/functions_manip_db.R, R/query_plots_v2_base.R
\name{PlotFilterBuilder}
\alias{PlotFilterBuilder}
\title{Query builder for plot}
\description{
Allow building progressively a SQL query to filter plots
following different criteria using the builder pattern

Permet de construire progressivement une requête SQL pour filtrer
les plots selon différents critères. Utilise le pattern Builder.
}
\section{Methods}{

\describe{
  \item{\code{new(connection)}}{
    Initialize the builder with a database connection.
    \itemize{
      \item \code{connection}: A DBI connection object to the database
    }
  }
  \item{\code{filter_country(country, interactive = FALSE)}}{
    Filter plots by country name(s).
    \itemize{
      \item \code{country}: Character vector of country name(s)
      \item \code{interactive}: Logical. If TRUE, uses .link_table for fuzzy matching
    }
  }
  \item{\code{filter_plot_name(plot_name, interactive = FALSE)}}{
    Filter plots by plot name(s).
    \itemize{
      \item \code{plot_name}: Character vector of plot name(s)
      \item \code{interactive}: Logical. If TRUE, uses .link_table for fuzzy matching
    }
  }
  \item{\code{filter_method(method, interactive = FALSE)}}{
    Filter plots by method(s).
    \itemize{
      \item \code{method}: Character vector of method name(s)
      \item \code{interactive}: Logical. If TRUE, uses .link_table for fuzzy matching
    }
  }
  \item{\code{filter_locality(locality_name)}}{
    Filter plots by locality name(s).
    \itemize{
      \item \code{locality_name}: Character vector of locality name(s)
    }
  }
  \item{\code{build(operator = "AND")}}{
    Build the final SQL query.
    \itemize{
      \item \code{operator}: Character. Join operator between conditions ("AND" or "OR"). Default is "AND"
    }
    Returns a SQL query object
  }
  \item{\code{build_with_or()}}{
    Build the SQL query with OR operator between conditions.
    Returns a SQL query object
  }
  \item{\code{add_custom_condition(condition, wrap_parentheses = TRUE)}}{
    Add a custom SQL condition.
    \itemize{
      \item \code{condition}: Character. Raw SQL condition string
      \item \code{wrap_parentheses}: Logical. If TRUE, wraps condition in parentheses
    }
  }
  \item{\code{print_conditions()}}{
    Display current filter conditions (for debugging).
  }
}
}

\examples{
\dontrun{
con <- call.mydb()
query <- PlotFilterBuilder$new(con)$
  filter_country("Gabon")$
  filter_method("transect")$
  build()
}

\dontrun{
con <- call.mydb()
query <- PlotFilterBuilder$new(con)$
  filter_country("Gabon")$
  filter_method("transect")$
  build()
}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-PlotFilterBuilder-new}{\code{PlotFilterBuilder$new()}}
\item \href{#method-PlotFilterBuilder-filter_country}{\code{PlotFilterBuilder$filter_country()}}
\item \href{#method-PlotFilterBuilder-filter_plot_name}{\code{PlotFilterBuilder$filter_plot_name()}}
\item \href{#method-PlotFilterBuilder-filter_method}{\code{PlotFilterBuilder$filter_method()}}
\item \href{#method-PlotFilterBuilder-filter_locality}{\code{PlotFilterBuilder$filter_locality()}}
\item \href{#method-PlotFilterBuilder-build}{\code{PlotFilterBuilder$build()}}
\item \href{#method-PlotFilterBuilder-build_with_or}{\code{PlotFilterBuilder$build_with_or()}}
\item \href{#method-PlotFilterBuilder-add_custom_condition}{\code{PlotFilterBuilder$add_custom_condition()}}
\item \href{#method-PlotFilterBuilder-print_conditions}{\code{PlotFilterBuilder$print_conditions()}}
\item \href{#method-PlotFilterBuilder-clone}{\code{PlotFilterBuilder$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-new"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-new}{}}}
\subsection{Method \code{new()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$new(connection)}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-filter_country"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-filter_country}{}}}
\subsection{Method \code{filter_country()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$filter_country(country, interactive = FALSE)}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-filter_plot_name"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-filter_plot_name}{}}}
\subsection{Method \code{filter_plot_name()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$filter_plot_name(plot_name, interactive = FALSE)}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-filter_method"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-filter_method}{}}}
\subsection{Method \code{filter_method()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$filter_method(method, interactive = FALSE)}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-filter_locality"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-filter_locality}{}}}
\subsection{Method \code{filter_locality()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$filter_locality(locality_name)}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-build"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-build}{}}}
\subsection{Method \code{build()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$build(operator = "AND")}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-build_with_or"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-build_with_or}{}}}
\subsection{Method \code{build_with_or()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$build_with_or()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-add_custom_condition"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-add_custom_condition}{}}}
\subsection{Method \code{add_custom_condition()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$add_custom_condition(condition, wrap_parentheses = TRUE)}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-print_conditions"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-print_conditions}{}}}
\subsection{Method \code{print_conditions()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$print_conditions()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-clone"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-PlotFilterBuilder-new}{\code{PlotFilterBuilder$new()}}
\item \href{#method-PlotFilterBuilder-filter_country}{\code{PlotFilterBuilder$filter_country()}}
\item \href{#method-PlotFilterBuilder-filter_plot_name}{\code{PlotFilterBuilder$filter_plot_name()}}
\item \href{#method-PlotFilterBuilder-filter_method}{\code{PlotFilterBuilder$filter_method()}}
\item \href{#method-PlotFilterBuilder-filter_locality}{\code{PlotFilterBuilder$filter_locality()}}
\item \href{#method-PlotFilterBuilder-build}{\code{PlotFilterBuilder$build()}}
\item \href{#method-PlotFilterBuilder-build_with_or}{\code{PlotFilterBuilder$build_with_or()}}
\item \href{#method-PlotFilterBuilder-add_custom_condition}{\code{PlotFilterBuilder$add_custom_condition()}}
\item \href{#method-PlotFilterBuilder-print_conditions}{\code{PlotFilterBuilder$print_conditions()}}
\item \href{#method-PlotFilterBuilder-clone}{\code{PlotFilterBuilder$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-new"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-new}{}}}
\subsection{Method \code{new()}}{
Initialiser le builder
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$new(connection)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{connection}}{Connexion DBI à la base de données}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-filter_country"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-filter_country}{}}}
\subsection{Method \code{filter_country()}}{
Filtrer par pays
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$filter_country(country, interactive = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{country}}{Nom(s) du/des pays}

\item{\code{interactive}}{Si TRUE, utilise .link_table pour correspondance floue interactive}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-filter_plot_name"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-filter_plot_name}{}}}
\subsection{Method \code{filter_plot_name()}}{
Filtrer par nom de plot
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$filter_plot_name(plot_name, interactive = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{plot_name}}{Nom(s) du/des plots}

\item{\code{interactive}}{Si TRUE, utilise .link_table pour correspondance floue interactive}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-filter_method"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-filter_method}{}}}
\subsection{Method \code{filter_method()}}{
Filtrer par méthode
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$filter_method(method, interactive = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{method}}{Nom(s) de(s) méthode(s)}

\item{\code{interactive}}{Si TRUE, utilise .link_table pour correspondance floue interactive}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-filter_locality"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-filter_locality}{}}}
\subsection{Method \code{filter_locality()}}{
Filtrer par localité
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$filter_locality(locality_name)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{locality_name}}{Nom(s) de(s) localité(s)}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-build"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-build}{}}}
\subsection{Method \code{build()}}{
Construire la requête SQL finale
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$build(operator = "AND")}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{operator}}{Opérateur de jointure entre conditions ("AND" ou "OR")}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
SQL query object
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-build_with_or"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-build_with_or}{}}}
\subsection{Method \code{build_with_or()}}{
Construire avec opérateur OR explicite
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$build_with_or()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
SQL query object
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-add_custom_condition"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-add_custom_condition}{}}}
\subsection{Method \code{add_custom_condition()}}{
Ajouter une condition personnalisée
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$add_custom_condition(condition, wrap_parentheses = TRUE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{condition}}{Condition SQL brute}

\item{\code{wrap_parentheses}}{Si TRUE, entoure la condition de parenthèses}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-print_conditions"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-print_conditions}{}}}
\subsection{Method \code{print_conditions()}}{
Afficher les conditions actuelles (pour debug)
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$print_conditions()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-PlotFilterBuilder-clone"></a>}}
\if{latex}{\out{\hypertarget{method-PlotFilterBuilder-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{PlotFilterBuilder$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
